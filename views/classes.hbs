<!DOCTYPE html>
<html>
	<head>
        <link href="https://unpkg.com/tailwindcss@2.0.2/dist/tailwind.min.css" rel="stylesheet">
		<meta charset="utf-8">
		<title>{{class_info.name}}</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.css">
		<link rel="stylesheet" href="/styles.css">
		<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
	</head>
	<body>
		{{> header}}
        <div class="text-center">
			<div class="text-6xl font-bold pb-1">
				{{class_info.name}} {{#checkEmpty class_info.alt}} ({{class_info.alt}}) {{/checkEmpty}}
			</div>
			<div class="width-full flex flex-row items-center justify-center">
				<div class="px-2"><b>ID: </b>{{class_info.id}}</div>
				<div class="px-2"><b>Category: </b>{{class_info.category}}</div>
				<div class="px-2"><b>Type: </b>{{class_info.type}}</div>
				<div class="px-2"><b>Length: </b>{{class_info.length}}</div>
				<div class="px-2"><b>Weighted: </b>{{class_info.weight}}</div>
			</div>
			<div class="flex flex-col">
				<div class="w-full flex flex-row">
					<div class="w-1/3 px-5">
						<div class="width-full text-center font-semibold text-3xl">
							Description
						</div>
						{{class_info.description}}
					</div>
					<div class="w-2/3 px-5 flex flex-col">
						<div class="w-full px-1 flex flex-row pb-2">
							{{> score_card score_name="Class Score" score=class_info.class_score rank=class_info.class_score_rank num_classes=class_info.num_classes score_text="/10" rank_category=class_info.class_score_category_rank num_category=class_info.num_category category=class_info.category}}
							{{> score_card score_name="Workload" score=class_info.workload rank=class_info.workload_rank num_classes=class_info.num_classes score_text="hrs/week" rank_category=class_info.workload_category_rank num_category=class_info.num_category category=class_info.category}}
						</div>
						<div class="w-full px-1 flex flex-row py-2">
							{{> score_card score_name="Difficulty" score=class_info.difficulty rank=class_info.difficulty_rank num_classes=class_info.num_classes score_text="/10" rank_category=class_info.difficulty_category_rank num_category=class_info.num_category category=class_info.category}}
							{{> score_card score_name="Enjoyment" score=class_info.enjoyment rank=class_info.enjoyment_rank num_classes=class_info.num_classes score_text="/10" rank_category=class_info.enjoyment_category_rank num_category=class_info.num_category category=class_info.category}}
						</div>
						<div class="w-full px-1 flex flex-row pt-2">
							{{> score_card score_name="Teacher Score" score=class_info.teacher_score rank=class_info.teacher_score_rank num_classes=class_info.num_classes score_text="/10" rank_category=class_info.teacher_score_category_rank num_category=class_info.num_category category=class_info.category}}
							{{> score_card score_name="Grade" score=class_info.grade rank=class_info.grade_rank num_classes=class_info.num_classes score_text="%" rank_category=class_info.grade_category_rank num_category=class_info.num_category category=class_info.category}}
						</div>
					</div>
				</div>
				<div class="flex flex-col">
					<div class="flex flex-col">
						<div class="w-full text-center font-bold text-3xl">
							Historical Data
						</div>
						<div class="w-full flex flex-row">
							<div class="w-1/2 px-2 flex flex-col">
								<div class="w-full text-center font-semibold text-2xl">
									Median
								</div>
								<div>
									<table id="median_term_table" class="display">
										<thead>
											<tr class="text-center">
												<th>Term</th>
												<th>#</th>
												<th>SCO</th>
												<th>WRK</th>
												<th>DIFF</th>
												<th>ENJ</th>
												<th>TCH</th>
												<th>GRD</th>
											</tr>
										</thead>
										<tbody>
											{{#each term_stats}}
											<tr>
												<td>{{this.term}}</td>
												<td>{{this.total}}</td>
												<td>{{fix_number this.med_score}}</td>
												<td>{{fix_number this.med_workload}}</td>
												<td>{{fix_number this.med_difficulty}}</td>
												<td>{{fix_number this.med_enjoyment}}</td>
												<td>{{fix_number this.med_teacher_score}}</td>
												<td>{{fix_number this.med_grade}} ({{this.grade_total}})</td>
											</tr>
											{{/each}}
										</tbody>
									</table>
								</div>
							</div>
							<div class="w-1/2 px-2 flex flex-col">
								<div class="w-full text-center font-semibold text-2xl">
									Average
								</div>
								<div>
									<table id="average_term_table" class="display">
										<thead>
											<tr class="text-center">
												<th>Term</th>
												<th>#</th>
												<th>SCO</th>
												<th>WRK</th>
												<th>DIFF</th>
												<th>ENJ</th>
												<th>TCH</th>
												<th>GRD</th>
											</tr>
										</thead>
										<tbody>
											{{#each term_stats}}
											<tr>
												<td>{{this.term}}</td>
												<td>{{this.total}}</td>
												<td>{{fix_number this.avg_score}}</td>
												<td>{{fix_number this.avg_workload}}</td>
												<td>{{fix_number this.avg_difficulty}}</td>
												<td>{{fix_number this.avg_enjoyment}}</td>
												<td>{{fix_number this.avg_teacher_score}}</td>
												<td>{{fix_number this.avg_grade}} ({{this.grade_total}})</td>
											</tr>
											{{/each}}
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
					<div class="flex flex-col">
						<div class="w-full text-center font-bold text-3xl">
							Teachers
						</div>
						<div class="w-full grid grid-cols-2 place-items-center items-center justify-center">
							{{#each teacher}}
							<div class="w-full px-2 flex flex-col">
								<div class="w-full text-center font-semibold text-2xl">
									{{this.name}}
								</div>
								<div>
									<table id="teacher_{{this.name}}_table" class="display">
										<thead>
											<tr class="text-center">
												<th>Term</th>
												<th>#</th>
												<th>SCO</th>
												<th>WRK</th>
												<th>DIFF</th>
												<th>ENJ</th>
												<th>TCH</th>
												<th>GRD</th>
											</tr>
										</thead>
										<tbody>
											{{#each this.terms}}
											<tr>
												<td>{{this.term}}</td>
												<td>{{this.total}}</td>
												<td>{{fix_number this.class_score}}</td>
												<td>{{fix_number this.workload}}</td>
												<td>{{fix_number this.difficulty}}</td>
												<td>{{fix_number this.enjoyment}}</td>
												<td>{{fix_number this.teacher_score}}</td>
												<td>{{fix_number this.grade}} ({{this.grade_total}})</td>
											</tr>
											{{/each}}
										</tbody>
									</table>
								</div>
							</div>
							{{/each}}
						</div>
					</div>
				</div>
			</div>
        </div>
		{{> footer}}
		<script type="text/javascript">
			var avg_table = $('#average_term_table').DataTable( {
				'columnDefs': [
					{
						'searchable'    : false,
						'targets'       : [1, 2, 3]
					},
				],
				"iDisplayLength": 10,
				"language": {
					"infoFiltered": ""
				},
				"order": [[ 0, "desc" ]]
			} );
			var median_table = $('#median_term_table').DataTable( {
				'columnDefs': [
					{
						'searchable'    : false,
						'targets'       : [1, 2, 3]
					},
				],
				"iDisplayLength": 10,
				"language": {
					"infoFiltered": ""
				},
				"order": [[ 0, "desc" ]]
			} );
			{{#each teacher}}
			var {{this.name}} = $('#teacher_{{this.name}}_table').DataTable( {
					'columnDefs': [
						{
							'searchable'    : false,
							'targets'       : [1, 2, 3]
						},
					],
					"iDisplayLength": 10,
					"language": {
						"infoFiltered": ""
					},
					"order": [[ 0, "desc" ]]
				} );
			{{/each}}

		</script>
    </body>
</html>
